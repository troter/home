# -*- coding:utf-8; mode:conf; -*-
# hgrc

[ui]
username = Takumi IINO <trot.thunder@gmail.com>

[extensions]
churn =
color =
convert =
eol =
extdiff =
fetch =
graphlog =
mq =
pager =
parentrevspec =
progress =
rebase =
record =
transplant =

[alias]
__mystatus = status
st = ! $HG __mystatus $($HG root) $HG_ARGS
# misc
cm = commit --message
. = summary
: = st
h = help

# branch
b = branch
bs = branches -a

# log
l = log
lb = log -b
show = log --color=always -pr
less = log -pr "reverse(not merge())"
gl = glog
gll = glog --limit

# shortlog
shortlog  = log  --template '\033[31m{rev}:{node|short}\033[m | {date|shortdate} | {author|user}: {desc|strip|firstline}\n'
gshortlog = glog --template '\033[31m{rev}:{node|short}\033[m | {date|shortdate} | {author|user}: {desc|strip|firstline}\n\033[36m{branches}\033[m\n'

# resolve
mark = resolve -m
unmark = resolve -u
conflicts = resolve -l
uselocal = resolve --tool internal:local
useother = resolve --tool internal:other

# pull & push
pr = pull --rebase
nudge = push --rev .
push = ! echo -e "\033[31m(use 'hg nudge' to push changesets)\033[m"

# shelve
sh = shelve
ush = unshelve

# mq
qi = qimport
qr = qrefresh
qf = qfinish
qls = qseries --summary
qst = status --change qtip

# power of commit
poc = churn -t '{author|email}' -c

safeclone = ! \
  $HG init "$(basename "$1")" && \
  echo -e "[paths]\ndefault = $1" >> "$(basename "$1")"/.hg/hgrc && \
  ( cd "$(basename "$1")" && $HG pull -u )

# fix latest commit message
fix = ! \
  $HG shelve --all -n 'tmp.hg-fix' && \
  if $HG qtop > /dev/null; then \
    $HG qrefresh -m "$1"; \
  else \
    $HG qimport -r .; \
    $HG qrefresh -m "$1"; \
    $HG qfinish -a; \
  fi; \
  $HG unshelve -n 'tmp.hg-fix'

[pager]
pager = LESS='FRX' less
attend = annotate, cat, diff, export, glog, log, qdiff, help, show, shortlog, gshortlog, less

[diff]
git = True

# include settings
%include $HOME/.mercurial/extensions.rc
%include $HOME/.mercurial/hooks.rc
%include $HOME/.mercurial/araxis.rc
%include $HOME/.mercurial/local.rc
